<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>å¤§èˆªæµ·äº”è§’è‰² Ã— SEL ç‰¹è³ªé›·é”åœ–æ¸¬é©—</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: "Noto Sans TC", -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
      margin: 0;
      padding: 0;
      background: radial-gradient(circle at top, #0b2545 0%, #020816 60%, #000 100%);
      color: #f5f5f5;
    }

    header {
      padding: 16px 24px;
      display: flex;
      flex-direction: column;
      gap: 6px;
      border-bottom: 1px solid rgba(255,255,255,0.08);
      background: linear-gradient(to right, rgba(7,16,32,0.96), rgba(10,33,61,0.96));
      position: sticky;
      top: 0;
      z-index: 10;
      backdrop-filter: blur(10px);
    }

    header h1 {
      margin: 0;
      font-size: 22px;
      letter-spacing: 1px;
    }

    header p {
      margin: 0;
      font-size: 13px;
      opacity: 0.82;
    }

    .container {
      max-width: 1080px;
      margin: 18px auto 40px;
      padding: 0 16px 24px;
      display: grid;
      grid-template-columns: minmax(0, 1.7fr) minmax(260px, 1.2fr);
      gap: 18px;
      align-items: flex-start;
    }

    .card {
      background: radial-gradient(circle at top left, rgba(255,255,255,0.04), rgba(2,8,22,0.98));
      border-radius: 18px;
      padding: 16px 16px 18px;
      border: 1px solid rgba(255,255,255,0.06);
      box-shadow: 0 10px 26px rgba(0,0,0,0.6);
    }

    .card h2 {
      margin: 0 0 10px;
      font-size: 18px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .card h3 {
      margin: 14px 0 8px;
      font-size: 15px;
      display: flex;
      align-items: center;
      gap: 6px;
      color: #ffdd8a;
    }

    .subtitle {
      font-size: 12px;
      opacity: 0.78;
      margin-bottom: 6px;
    }

    .question {
      margin: 6px 0 2px;
      font-size: 13px;
      line-height: 1.5;
    }

    .scale {
      display: flex;
      gap: 6px;
      align-items: center;
      margin: 0 0 5px;
      flex-wrap: wrap;
      font-size: 11px;
    }

    .scale label {
      display: flex;
      align-items: center;
      gap: 2px;
      padding: 3px 5px;
      border-radius: 8px;
      background: rgba(255,255,255,0.02);
      cursor: pointer;
      transition: all 0.18s ease;
      border: 1px solid transparent;
    }

    .scale input[type="radio"] {
      accent-color: #ffcc66;
      cursor: pointer;
      width: 12px;
      height: 12px;
    }

    .scale label:hover {
      background: rgba(255, 204, 102, 0.08);
      border-color: rgba(255, 204, 102, 0.16);
    }

    .scale span.option-label {
      font-size: 10px;
      opacity: 0.7;
    }

    .legend {
      font-size: 10px;
      opacity: 0.75;
      margin-bottom: 4px;
    }

    .btn-area {
      margin-top: 10px;
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    button {
      border: none;
      border-radius: 999px;
      padding: 7px 14px;
      font-size: 12px;
      cursor: pointer;
      background: linear-gradient(to right, #ffcc66, #ff9966);
      color: #1a1a1a;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.4);
      transition: all 0.18s ease;
    }

    button:hover {
      transform: translateY(-1px);
      box-shadow: 0 6px 14px rgba(0,0,0,0.55);
    }

    button.secondary {
      background: transparent;
      color: #ffddaa;
      border: 1px solid rgba(255,221,170,0.35);
      box-shadow: none;
    }

    button.secondary:hover {
      background: rgba(255,221,170,0.06);
      box-shadow: 0 4px 10px rgba(0,0,0,0.35);
    }

    #chartCard h2 {
      justify-content: space-between;
    }

    #radarChart {
      max-height: 320px;
    }

    .scores {
      margin-top: 6px;
      font-size: 11px;
      line-height: 1.6;
    }

    .role-label {
      font-weight: 600;
      color: #ffcc66;
    }

    .hint {
      font-size: 10px;
      opacity: 0.7;
      margin-top: 4px;
    }

    .note {
      font-size: 10px;
      opacity: 0.7;
      margin-top: 8px;
    }

    @media (max-width: 800px) {
      .container {
        grid-template-columns: 1fr;
      }
      header {
        position: static;
      }
    }
  </style>
</head>
<body>
<header>
  <h1>å¤§èˆªæµ·äº”è§’è‰² Ã— SEL ç‰¹è³ªå•å·</h1>
  <p>å®Œæˆ 20 é¡Œï¼Œç«‹åˆ»çœ‹è¦‹ä½ çš„ã€Œèˆ¹é•·ãƒ»èˆªæµ·å£«ãƒ»èˆ¹é†«ãƒ»å‚³æ•™å£«ãƒ»æ°´æ‰‹ã€äº”è§’é›·é”åœ–ã€‚</p>
</header>

<div class="container">

  <!-- å•å·å€ -->
  <div class="card">
    <h2>ğŸ“ å•å·ä½œç­”å€</h2>
    <div class="subtitle">
      è«‹ä»¥ä½ åœ¨ã€Œå¹³å¸¸å°çµ„åˆä½œã€è¨è«–ã€å®Œæˆä»»å‹™ã€æ™‚çš„ç¿’æ…£å›ç­”ã€‚æ²’æœ‰å¥½å£è§’è‰²ï¼Œäº”ç¨®åŠ›é‡éƒ½å¾ˆé‡è¦ã€‚
      ï¼ˆ1ï¼éå¸¸ä¸åŒæ„ï¼Œ5ï¼éå¸¸åŒæ„ï¼‰
    </div>

    <div class="legend">
      æ¯é¡Œè«‹å‹¾é¸ä¸€å€‹æ•¸å­—ã€‚å®Œæˆå¾ŒæŒ‰ä¸‹ã€Œç”Ÿæˆé›·é”åœ–ã€æŸ¥çœ‹çµæœã€‚
    </div>

    <!-- èˆ¹é•· -->
    <h3>ğŸ§‘â€âœˆï¸ èˆ¹é•·å‚¾å‘ Leadership</h3>

    <div class="question">1. ç•¶å°çµ„å‡ºç¾ä¸åŒæ„è¦‹æ™‚ï¼Œæˆ‘èƒ½å”åŠ©å¤§å®¶é”æˆå…±è­˜ã€‚</div>
    <div class="scale" data-role="captain">
      <label><input type="radio" name="q1" value="1"><span>1</span></label>
      <label><input type="radio" name="q1" value="2"><span>2</span></label>
      <label><input type="radio" name="q1" value="3"><span>3</span></label>
      <label><input type="radio" name="q1" value="4"><span>4</span></label>
      <label><input type="radio" name="q1" value="5"><span>5</span></label>
    </div>

    <div class="question">2. æˆ‘æœƒä¸»å‹•é—œå¿ƒé€²åº¦ï¼Œç¢ºä¿ä»»å‹™èƒ½é †åˆ©å®Œæˆã€‚</div>
    <div class="scale" data-role="captain">
      <label><input type="radio" name="q2" value="1"><span>1</span></label>
      <label><input type="radio" name="q2" value="2"><span>2</span></label>
      <label><input type="radio" name="q2" value="3"><span>3</span></label>
      <label><input type="radio" name="q2" value="4"><span>4</span></label>
      <label><input type="radio" name="q2" value="5"><span>5</span></label>
    </div>

    <div class="question">3. é¢å°å£“åŠ›æˆ–çªç™¼ç‹€æ³æ™‚ï¼Œæˆ‘èƒ½ä¿æŒå†·éœä¸¦å¸¶å‹•è¡Œå‹•ã€‚</div>
    <div class="scale" data-role="captain">
      <label><input type="radio" name="q3" value="1"><span>1</span></label>
      <label><input type="radio" name="q3" value="2"><span>2</span></label>
      <label><input type="radio" name="q3" value="3"><span>3</span></label>
      <label><input type="radio" name="q3" value="4"><span>4</span></label>
      <label><input type="radio" name="q3" value="5"><span>5</span></label>
    </div>

    <div class="question">4. æˆ‘é¡˜æ„å‚¾è½ä¸¦æ•´åˆå¤§å®¶çš„æ„è¦‹ï¼Œå†æå‡ºå¯è¡Œæ–¹å‘ã€‚</div>
    <div class="scale" data-role="captain">
      <label><input type="radio" name="q4" value="1"><span>1</span></label>
      <label><input type="radio" name="q4" value="2"><span>2</span></label>
      <label><input type="radio" name="q4" value="3"><span>3</span></label>
      <label><input type="radio" name="q4" value="4"><span>4</span></label>
      <label><input type="radio" name="q4" value="5"><span>5</span></label>
    </div>

    <!-- èˆªæµ·å£« -->
    <h3>ğŸ§­ èˆªæµ·å£«å‚¾å‘ Insight</h3>

    <div class="question">5. æˆ‘ç¿’æ…£åœ¨è¡Œå‹•å‰å…ˆè§€å¯Ÿæƒ…æ³èˆ‡å¯èƒ½çš„çµæœã€‚</div>
    <div class="scale" data-role="navigator">
      <label><input type="radio" name="q5" value="1"><span>1</span></label>
      <label><input type="radio" name="q5" value="2"><span>2</span></label>
      <label><input type="radio" name="q5" value="3"><span>3</span></label>
      <label><input type="radio" name="q5" value="4"><span>4</span></label>
      <label><input type="radio" name="q5" value="5"><span>5</span></label>
    </div>

    <div class="question">6. æˆ‘å–œæ­¡æ‰¾å‡ºè³‡æ–™æˆ–è³‡è¨Šä¹‹é–“çš„é—œè¯ï¼Œå¹«åŠ©ç†è§£å…¨è²Œã€‚</div>
    <div class="scale" data-role="navigator">
      <label><input type="radio" name="q6" value="1"><span>1</span></label>
      <label><input type="radio" name="q6" value="2"><span>2</span></label>
      <label><input type="radio" name="q6" value="3"><span>3</span></label>
      <label><input type="radio" name="q6" value="4"><span>4</span></label>
      <label><input type="radio" name="q6" value="5"><span>5</span></label>
    </div>

    <div class="question">7. æˆ‘å¸¸æé†’è‡ªå·±æˆ–ä»–äººæ€è€ƒã€Œé€™æ¨£åšæœƒæœ‰ä»€éº¼å¾Œæœã€ã€‚</div>
    <div class="scale" data-role="navigator">
      <label><input type="radio" name="q7" value="1"><span>1</span></label>
      <label><input type="radio" name="q7" value="2"><span>2</span></label>
      <label><input type="radio" name="q7" value="3"><span>3</span></label>
      <label><input type="radio" name="q7" value="4"><span>4</span></label>
      <label><input type="radio" name="q7" value="5"><span>5</span></label>
    </div>

    <div class="question">8. æˆ‘æœƒæ³¨æ„ä»»å‹™ä¸­ç´°ç¯€èˆ‡é‚è¼¯ï¼Œé¿å…å‡ºç¾éŒ¯èª¤ã€‚</div>
    <div class="scale" data-role="navigator">
      <label><input type="radio" name="q8" value="1"><span>1</span></label>
      <label><input type="radio" name="q8" value="2"><span>2</span></label>
      <label><input type="radio" name="q8" value="3"><span>3</span></label>
      <label><input type="radio" name="q8" value="4"><span>4</span></label>
      <label><input type="radio" name="q8" value="5"><span>5</span></label>
    </div>

    <!-- èˆ¹é†« -->
    <h3>ğŸ©º èˆ¹é†«å‚¾å‘ Support</h3>

    <div class="question">9. æˆ‘æœƒè§€å¯Ÿä»»å‹™ä¸­å“ªäº›åœ°æ–¹éœ€è¦å¹«å¿™ï¼Œä¸¦ä¸»å‹•å”åŠ©ã€‚</div>
    <div class="scale" data-role="medic">
      <label><input type="radio" name="q9" value="1"><span>1</span></label>
      <label><input type="radio" name="q9" value="2"><span>2</span></label>
      <label><input type="radio" name="q9" value="3"><span>3</span></label>
      <label><input type="radio" name="q9" value="4"><span>4</span></label>
      <label><input type="radio" name="q9" value="5"><span>5</span></label>
    </div>

    <div class="question">10. ç•¶å°çµ„é€²åº¦å—é˜»æ™‚ï¼Œæˆ‘æœƒå”åŠ©è™•ç†çœ¼å‰çš„å•é¡Œã€‚</div>
    <div class="scale" data-role="medic">
      <label><input type="radio" name="q10" value="1"><span>1</span></label>
      <label><input type="radio" name="q10" value="2"><span>2</span></label>
      <label><input type="radio" name="q10" value="3"><span>3</span></label>
      <label><input type="radio" name="q10" value="4"><span>4</span></label>
      <label><input type="radio" name="q10" value="5"><span>5</span></label>
    </div>

    <div class="question">11. æˆ‘èƒ½å¾åŒå­¸çš„è¡¨æƒ…æˆ–èªæ°£çœ‹å‡ºä»–éœ€è¦å¹«åŠ©ã€‚</div>
    <div class="scale" data-role="medic">
      <label><input type="radio" name="q11" value="1"><span>1</span></label>
      <label><input type="radio" name="q11" value="2"><span>2</span></label>
      <label><input type="radio" name="q11" value="3"><span>3</span></label>
      <label><input type="radio" name="q11" value="4"><span>4</span></label>
      <label><input type="radio" name="q11" value="5"><span>5</span></label>
    </div>

    <div class="question">12. ç•¶åœ˜éšŠæ°£æ°›ä½è½æ™‚ï¼Œæˆ‘æœƒåšäº›äº‹è®“å¤§å®¶é‡æ–°æŒ¯ä½œï¼ˆè£œä¸Šä»»å‹™ã€æ•´ç†è³‡æ–™æˆ–å¯¦éš›å”åŠ©ï¼‰ã€‚</div>
    <div class="scale" data-role="medic">
      <label><input type="radio" name="q12" value="1"><span>1</span></label>
      <label><input type="radio" name="q12" value="2"><span>2</span></label>
      <label><input type="radio" name="q12" value="3"><span>3</span></label>
      <label><input type="radio" name="q12" value="4"><span>4</span></label>
      <label><input type="radio" name="q12" value="5"><span>5</span></label>
    </div>

    <!-- å‚³æ•™å£« -->
    <h3>âœï¸ å‚³æ•™å£«å‚¾å‘ Mission</h3>

    <div class="question">13. æˆ‘æœƒæ€è€ƒä¸€ä»¶äº‹ã€Œç‚ºä»€éº¼å€¼å¾—å»åšã€ï¼Œä¸¦é¡˜æ„èˆ‡ä»–äººåˆ†äº«é€™å€‹åŸå› ã€‚</div>
    <div class="scale" data-role="missionary">
      <label><input type="radio" name="q13" value="1"><span>1</span></label>
      <label><input type="radio" name="q13" value="2"><span>2</span></label>
      <label><input type="radio" name="q13" value="3"><span>3</span></label>
      <label><input type="radio" name="q13" value="4"><span>4</span></label>
      <label><input type="radio" name="q13" value="5"><span>5</span></label>
    </div>

    <div class="question">14. ç•¶åœ˜éšŠå¤±å»æ–¹å‘æ™‚ï¼Œæˆ‘æœƒæé†’å¤§å®¶æˆ‘å€‘æœ€åˆçš„ç›®æ¨™æˆ–æ„ç¾©ã€‚</div>
    <div class="scale" data-role="missionary">
      <label><input type="radio" name="q14" value="1"><span>1</span></label>
      <label><input type="radio" name="q14" value="2"><span>2</span></label>
      <label><input type="radio" name="q14" value="3"><span>3</span></label>
      <label><input type="radio" name="q14" value="4"><span>4</span></label>
      <label><input type="radio" name="q14" value="5"><span>5</span></label>
    </div>

    <div class="question">15. æˆ‘å°ä¸åŒæ–‡åŒ–æˆ–æƒ³æ³•æ„Ÿåˆ°å¥½å¥‡ï¼Œä¸¦å¾ä¸­å°‹æ‰¾å…±åŒæˆ–å€¼å¾—å°Šé‡çš„åƒ¹å€¼ã€‚</div>
    <div class="scale" data-role="missionary">
      <label><input type="radio" name="q15" value="1"><span>1</span></label>
      <label><input type="radio" name="q15" value="2"><span>2</span></label>
      <label><input type="radio" name="q15" value="3"><span>3</span></label>
      <label><input type="radio" name="q15" value="4"><span>4</span></label>
      <label><input type="radio" name="q15" value="5"><span>5</span></label>
    </div>

    <div class="question">16. ç•¶æˆ‘ç›¸ä¿¡æŸä»¶äº‹æœ‰åƒ¹å€¼æ™‚ï¼Œæˆ‘æœƒç”¨è¡Œå‹•æˆ–è¡¨é”è®“ä»–äººä¹Ÿèƒ½æ„Ÿå—åˆ°ã€‚</div>
    <div class="scale" data-role="missionary">
      <label><input type="radio" name="q16" value="1"><span>1</span></label>
      <label><input type="radio" name="q16" value="2"><span>2</span></label>
      <label><input type="radio" name="q16" value="3"><span>3</span></label>
      <label><input type="radio" name="q16" value="4"><span>4</span></label>
      <label><input type="radio" name="q16" value="5"><span>5</span></label>
    </div>

    <!-- æ°´æ‰‹ -->
    <h3>âš“ æ°´æ‰‹å‚¾å‘ Execution</h3>

    <div class="question">17. å³ä½¿ä»»å‹™é‡è¤‡æˆ–è€—æ™‚ï¼Œæˆ‘ä¹ŸæœƒæŒçºŒå®Œæˆã€‚</div>
    <div class="scale" data-role="sailor">
      <label><input type="radio" name="q17" value="1"><span>1</span></label>
      <label><input type="radio" name="q17" value="2"><span>2</span></label>
      <label><input type="radio" name="q17" value="3"><span>3</span></label>
      <label><input type="radio" name="q17" value="4"><span>4</span></label>
      <label><input type="radio" name="q17" value="5"><span>5</span></label>
    </div>

    <div class="question">18. æˆ‘è¦ºå¾—ç©©å®šåœ°å®Œæˆä»»å‹™æ¯”ä¸€ç›´æ”¹è¨ˆç•«æ›´é‡è¦ã€‚</div>
    <div class="scale" data-role="sailor">
      <label><input type="radio" name="q18" value="1"><span>1</span></label>
      <label><input type="radio" name="q18" value="2"><span>2</span></label>
      <label><input type="radio" name="q18" value="3"><span>3</span></label>
      <label><input type="radio" name="q18" value="4"><span>4</span></label>
      <label><input type="radio" name="q18" value="5"><span>5</span></label>
    </div>

    <div class="question">19. ç•¶ä»»å‹™éœ€è¦é«”åŠ›ã€è€å¿ƒæˆ–é‡è¤‡æ“ä½œæ™‚ï¼Œæˆ‘é¡˜æ„æ’åˆ°æœ€å¾Œã€‚</div>
    <div class="scale" data-role="sailor">
      <label><input type="radio" name="q19" value="1"><span>1</span></label>
      <label><input type="radio" name="q19" value="2"><span>2</span></label>
      <label><input type="radio" name="q19" value="3"><span>3</span></label>
      <label><input type="radio" name="q19" value="4"><span>4</span></label>
      <label><input type="radio" name="q19" value="5"><span>5</span></label>
    </div>

    <div class="question">20. æˆ‘æœƒåœ¨æ²’äººæé†’çš„æƒ…æ³ä¸‹ï¼Œè‡ªå‹•å®Œæˆè‡ªå·±è©²åšçš„å·¥ä½œã€‚</div>
    <div class="scale" data-role="sailor">
      <label><input type="radio" name="q20" value="1"><span>1</span></label>
      <label><input type="radio" name="q20" value="2"><span>2</span></label>
      <label><input type="radio" name="q20" value="3"><span>3</span></label>
      <label><input type="radio" name="q20" value="4"><span>4</span></label>
      <label><input type="radio" name="q20" value="5"><span>5</span></label>
    </div>

    <div class="btn-area">
      <button id="generateBtn">âš“ ç”Ÿæˆæˆ‘çš„èˆªæµ·é›·é”åœ–</button>
      <button type="button" class="secondary" id="resetBtn">é‡å¡«å•å·</button>
    </div>

    <div class="note">
      æé†’ï¼šè«‹ä¾ç…§çœŸå¯¦æƒ…æ³ä½œç­”ï¼Œæ²’æœ‰ã€Œæœ€å¥½è§’è‰²ã€ï¼Œäº”ç¨®åŠ›é‡éƒ½æ˜¯èˆªç¨‹ä¸­é‡è¦çš„ä¸€éƒ¨åˆ†ã€‚
    </div>
  </div>

  <!-- é›·é”åœ–å€ -->
  <div class="card" id="chartCard">
    <h2>ğŸ§­ èˆªæµ·é›·é”åœ–èˆ‡åˆ†æ</h2>
    <canvas id="radarChart"></canvas>
    <div class="scores" id="scoreText">
      å¡«å®Œå•å·ä¸¦æŒ‰ä¸‹ã€Œç”Ÿæˆæˆ‘çš„èˆªæµ·é›·é”åœ–ã€ï¼Œé€™è£¡æœƒé¡¯ç¤ºä½ çš„å„è§’è‰²åˆ†æ•¸èˆ‡ç°¡çŸ­èªªæ˜ã€‚
    </div>
    <div class="hint">
      é›·é”åœ–äº”è§’åˆ†åˆ¥ä»£è¡¨ï¼šèˆ¹é•·ï¼ˆé ˜å°ï¼‰ã€èˆªæµ·å£«ï¼ˆæ´å¯Ÿï¼‰ã€èˆ¹é†«ï¼ˆæ”¯æ´ï¼‰ã€å‚³æ•™å£«ï¼ˆä½¿å‘½ï¼‰ã€æ°´æ‰‹ï¼ˆå¯¦è¸ï¼‰ã€‚
    </div>
  </div>
</div>

<script>
  // å•å·è§’è‰²å°æ‡‰
  const ROLE_CONFIG = {
    captain:  { label: "èˆ¹é•·",    color: "#ffd166" },
    navigator:{ label: "èˆªæµ·å£«",  color: "#06d6a0" },
    medic:    { label: "èˆ¹é†«",    color: "#4cc9f0" },
    missionary:{label: "å‚³æ•™å£«",  color: "#f72585" },
    sailor:   { label: "æ°´æ‰‹",    color: "#9b5de5" }
  };

  // è¨ˆç®—åˆ†æ•¸
  function calculateScores() {
    const scores = {
      captain: [],
      navigator: [],
      medic: [],
      missionary: [],
      sailor: []
    };

    // æ”¶é›†æ‰€æœ‰æœ‰ data-role çš„é¡Œç›®ç¾¤çµ„
    document.querySelectorAll(".scale").forEach(scaleEl => {
      const role = scaleEl.getAttribute("data-role");
      const checked = scaleEl.querySelector("input[type='radio']:checked");
      if (role && checked) {
        scores[role].push(Number(checked.value));
      }
    });

    // æª¢æŸ¥æ˜¯å¦å…¨éƒ¨æœ‰ä½œç­”
    const totalAnswered = Object.values(scores).reduce((sum, arr) => sum + arr.length, 0);
    if (totalAnswered < 20) {
      alert("é‚„æœ‰é¡Œç›®æœªä½œç­”ï¼Œè«‹ç¢ºèªæ¯é¡Œéƒ½å·²é¸æ“‡ 1ï½5 åˆ†ã€‚");
      return null;
    }

    // ç®—å¹³å‡åˆ†
    const avg = {};
    for (const role in scores) {
      const arr = scores[role];
      const total = arr.reduce((a,b) => a + b, 0);
      avg[role] = (total / arr.length);
    }
    return avg;
  }

  let radarChart = null;

  function renderRadarChart(avg) {
    const ctx = document.getElementById("radarChart").getContext("2d");

    const labels = Object.keys(ROLE_CONFIG).map(key => ROLE_CONFIG[key].label);
    const data = Object.keys(ROLE_CONFIG).map(key => Number(avg[key].toFixed(2)));

    if (radarChart) {
      radarChart.destroy();
    }

    radarChart = new Chart(ctx, {
      type: "radar",
      data: {
        labels: labels,
        datasets: [{
          label: "æˆ‘çš„èˆªæµ·ç‰¹è³ªå¼·åº¦ï¼ˆ1ï½5åˆ†ï¼‰",
          data: data,
          fill: true,
          backgroundColor: "rgba(255, 204, 102, 0.18)",
          borderColor: "rgba(255, 204, 102, 0.95)",
          pointBackgroundColor: "#ffcc66",
          pointRadius: 3,
          pointHoverRadius: 4,
          borderWidth: 2
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        scales: {
          r: {
            suggestedMin: 1,
            suggestedMax: 5,
            ticks: {
              stepSize: 1,
              backdropColor: "transparent",
              color: "rgba(245,245,245,0.75)",
              font: { size: 9 }
            },
            grid: {
              color: "rgba(255,255,255,0.12)"
            },
            angleLines: {
              color: "rgba(255,255,255,0.15)"
            },
            pointLabels: {
              color: "#ffdd99",
              font: { size: 11 }
            }
          }
        },
        plugins: {
          legend: {
            display: false
          }
        }
      }
    });

    // é¡¯ç¤ºæ–‡å­—è§£è®€
    const scoreBox = document.getElementById("scoreText");
    let html = "";
    const sorted = Object.entries(avg).sort((a,b) => b[1] - a[1]);

    for (const [role, value] of Object.entries(avg)) {
      const info = ROLE_CONFIG[role];
      html += `<div><span class="role-label">${info.label}</span>ï¼š${value.toFixed(2)} åˆ†</div>`;
    }

    const topRole = sorted[0][0];
    const topInfo = {
      captain:  "ä½ åœ¨å¸¶é ˜æ–¹å‘ã€æ•´åˆæ„è¦‹ä¸Šæœ‰æ˜é¡¯å„ªå‹¢ï¼Œå¾ˆé©åˆæ“”ä»»èˆ¹é•·æˆ–æ ¸å¿ƒæ±ºç­–è§’è‰²ã€‚",
      navigator:"ä½ å–„æ–¼è§€å¯Ÿèˆ‡åˆ†æï¼Œé©åˆæ“”ä»»è¦åŠƒè·¯ç·šã€è¨­è¨ˆç­–ç•¥çš„èˆªæµ·å£«ã€‚",
      medic:    "ä½ æ“…é•·æ”¯æ´èˆ‡è£œä½ï¼Œèƒ½ç…§é¡§ä»»å‹™é€²è¡Œçš„ç´°ç¯€ï¼Œæ˜¯ç©©å®šåœ˜éšŠçš„é‡è¦èˆ¹é†«ã€‚",
      missionary:"ä½ é‡è¦–æ„ç¾©èˆ‡åƒ¹å€¼ï¼Œæœƒå½±éŸ¿åœ˜éšŠçš„ç²¾ç¥æ°£æ°›ï¼Œåƒæ˜¯ä¸€ä½å‚³é”ç†å¿µçš„å‚³æ•™å£«ã€‚",
      sailor:   "ä½ å¯é ã€è‚¯åšäº‹ã€èƒ½æ’åˆ°åº•ï¼Œæ˜¯è®“æ•´è‰˜èˆ¹çœŸæ­£å‰é€²çš„é—œéµæ°´æ‰‹ã€‚"
    }[topRole];

    html += `<div class="hint" style="margin-top:4px;">äº”é …ä¸­æœ€é«˜çš„æ˜¯ï¼š<span class="role-label">${ROLE_CONFIG[topRole].label}</span>ã€‚${topInfo}</div>`;
    scoreBox.innerHTML = html;
  }

  document.getElementById("generateBtn").addEventListener("click", () => {
    const avg = calculateScores();
    if (!avg) return;
    renderRadarChart(avg);
  });

  document.getElementById("resetBtn").addEventListener("click", () => {
    document.querySelectorAll("input[type='radio']").forEach(i => i.checked = false);
    if (radarChart) {
      radarChart.destroy();
      radarChart = null;
    }
    document.getElementById("scoreText").textContent =
      "å¡«å®Œå•å·ä¸¦æŒ‰ä¸‹ã€Œç”Ÿæˆæˆ‘çš„èˆªæµ·é›·é”åœ–ã€ï¼Œé€™è£¡æœƒé¡¯ç¤ºä½ çš„å„è§’è‰²åˆ†æ•¸èˆ‡ç°¡çŸ­èªªæ˜ã€‚";
  });
</script>

</body>
</html>
