<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>è§’è‰²ç‰¹è³ªæ¸¬é©—ï½œå¤§èˆªæµ·äº”è§’è‰²é›·é”åœ–</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: "Noto Sans TC", -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
      margin: 0;
      padding: 0;
      background:
        linear-gradient(rgba(5, 10, 25, 0.7), rgba(5, 10, 25, 0.7)),
        url("https://upload.wikimedia.org/wikipedia/commons/5/5c/John_C._Munro_off_Hong_Kong.jpg")
        no-repeat center center fixed;
      background-size: cover;
      color: #f5f5f5;
    }

    header {
      padding: 22px 28px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      border-bottom: 1px solid rgba(255,255,255,0.12);
      background: radial-gradient(circle at top left, rgba(0,0,0,0.7), rgba(0,0,0,0.3));
      backdrop-filter: blur(6px);
    }

    header h1 {
      margin: 0;
      font-size: 32px;
      color: #ffdd66;
    }

    header p {
      margin: 0;
      font-size: 18px;
      color: #ffdd66;
    }

    .container {
      max-width: 1080px;
      margin: 28px auto 60px;
      padding: 0 24px 36px;
    }

    .card {
      background: radial-gradient(circle at top left, rgba(255,255,255,0.05), rgba(2,8,22,0.95));
      border-radius: 20px;
      padding: 28px 24px 30px;
      border: 1px solid rgba(255,255,255,0.08);
      box-shadow: 0 12px 30px rgba(0,0,0,0.6);
    }

    .card h2 {
      font-size: 24px;
      color: #ffdd88;
      margin-bottom: 16px;
    }

    .subtitle {
      font-size: 20px;
      margin-bottom: 20px;
      color: #ffdd66;
      line-height: 1.6;
    }

    .question-block {
      margin-bottom: 22px;
      padding-bottom: 10px;
      border-bottom: 1px dashed rgba(255,255,255,0.08);
    }

    .question-text {
      font-size: 20px;
      line-height: 1.8;
      margin-bottom: 8px;
    }

    .scale {
      display: flex;
      gap: 10px;
      align-items: center;
      flex-wrap: wrap;
      font-size: 16px;
    }

    .scale label {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 6px 10px;
      border-radius: 10px;
      background: rgba(255,255,255,0.04);
      cursor: pointer;
      border: 1px solid transparent;
      transition: all 0.2s ease;
    }

    .scale input[type="radio"] {
      accent-color: #ffcc66;
      width: 18px;
      height: 18px;
      cursor: pointer;
    }

    .scale label:hover {
      background: rgba(255,204,102,0.15);
      border-color: rgba(255,204,102,0.35);
    }

    .btn-area {
      margin-top: 22px;
      display: flex;
      flex-wrap: wrap;
      gap: 14px;
    }

    button {
      border: none;
      border-radius: 999px;
      padding: 12px 24px;
      font-size: 18px;
      cursor: pointer;
      background: linear-gradient(to right, #ffcc66, #ff9966);
      color: #1a1a1a;
      font-weight: 700;
      box-shadow: 0 6px 14px rgba(0,0,0,0.5);
      transition: all 0.2s ease;
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 18px rgba(0,0,0,0.65);
    }

    button.secondary {
      background: transparent;
      color: #ffddaa;
      border: 2px solid rgba(255,221,170,0.4);
    }

    button.secondary:hover {
      background: rgba(255,221,170,0.1);
    }

    .note {
      font-size: 16px;
      opacity: 0.85;
      margin-top: 18px;
      color: #ffddaa;
      line-height: 1.6;
    }
  </style>
</head>
<body>
<header>
  <h1>è§’è‰²ç‰¹è³ªæ¸¬é©—</h1>
  <p>ä¾ç…§å‰›å‰›è‡ªå·±çš„è¡¨ç¾æˆ–å¹³æ™‚çš„ç¿’æ…£ä¾†ä½œç­”ï¼Œå°‹æ‰¾é©åˆè‡ªå·±çš„è§’è‰²å§ï¼</p>
</header>

<div class="container">
  <div class="card">
    <h2>ğŸ“ å•å·ä½œç­”å€</h2>
    <div class="subtitle">
      è«‹å›æƒ³å‰›å‰›çš„å°çµ„ä»»å‹™éç¨‹ï¼Œæˆ–å¹³å¸¸åˆ†çµ„åˆä½œçš„æƒ…æ³ï¼Œ
      ä»¥çœŸå¯¦æ„Ÿå—ä½œç­”ï¼Œæ¯é¡Œè«‹å‹¾é¸ä¸€å€‹æ•¸å­—ï¼ˆ1ï¼éå¸¸ä¸åŒæ„ï¼Œ5ï¼éå¸¸åŒæ„ï¼‰ã€‚
      å®Œæˆå¾ŒæŒ‰ä¸‹ã€Œç”Ÿæˆé›·é”åœ–ã€æŸ¥çœ‹ä½ çš„èˆªæµ·è§’è‰²ç‰¹è³ªåˆ†å¸ƒã€‚
    </div>

    <div id="questionsContainer"></div>

    <div class="btn-area">
      <button id="generateBtn">âš“ ç”Ÿæˆæˆ‘çš„èˆªæµ·é›·é”åœ–</button>
      <button type="button" class="secondary" id="resetBtn">é‡å¡«å•å·</button>
    </div>
  </div>
</div>

<script>
  const ROLE_CONFIG = {
    captain:   { label: "èˆ¹é•·" },
    navigator: { label: "èˆªæµ·å£«" },
    medic:     { label: "èˆ¹é†«" },
    missionary:{ label: "å‚³æ•™å£«" },
    sailor:    { label: "æ°´æ‰‹" }
  };

  // é‡æ–°è¨­è¨ˆé¡Œç›®ï¼šå°æ‡‰å°çµ„ä»»å‹™æ­·ç¨‹ã€è‡ªæˆ‘è¦ºå¯Ÿèˆ‡äº”ç¨®è§’è‰²ç‰¹è³ª
  // æ¯å€‹è§’è‰² 4 é¡Œï¼Œå…¶ä¸­ 1 é¡Œç‚ºåå‘é¡Œ(reverse: true)
  const QUESTIONS = [
    // èˆ¹é•·ï¼šé ˜å°ã€åˆ†å·¥ã€æ±ºç­–ã€å‡èš
    { id: "q1",  text: "åœ¨å°çµ„è¨è«–æ™‚ï¼Œæˆ‘æœƒä¸»å‹•é–‹é ­æˆ–æ”¶æ–‚é‡é»ï¼Œå¹«å¤§å®¶èšç„¦åœ¨å…±åŒç›®æ¨™ä¸Šã€‚", role: "captain" },
    { id: "q2",  text: "åˆ†é…å·¥ä½œæ™‚ï¼Œæˆ‘æœƒå”èª¿èª°é©åˆåšä»€éº¼ï¼Œç›¡é‡è®“ä»»å‹™åˆ†é…æ¸…æ¥šåˆå…¬å¹³ã€‚", role: "captain" },
    { id: "q3",  text: "ç•¶çµ„å…§å‡ºç¾çŒ¶è±«æˆ–å¡ä½æ™‚ï¼Œæˆ‘é¡˜æ„åšå‡ºæ±ºå®šï¼Œå¸¶è‘—å¤§å®¶å¾€ä¸‹ä¸€æ­¥å‰é€²ã€‚", role: "captain" },
    { id: "q4",  text: "åœ¨å°çµ„ä»»å‹™ä¸­ï¼Œæˆ‘é€šå¸¸ä¸å¤ªç™¼è¡¨æ„è¦‹ï¼Œä¹Ÿä¸å¤ªåƒèˆ‡åˆ†å·¥æˆ–æ±ºç­–ï¼Œåªè·Ÿè‘—åšå°±å¥½ã€‚", role: "captain", reverse: true },

    // èˆªæµ·å£«ï¼šåˆ†æã€æ–¹æ³•ã€å…§æ–‚ã€å»ºè­°
    { id: "q5",  text: "é–‹å§‹ä»»å‹™å‰ï¼Œæˆ‘æœƒå…ˆç¢ºèªç›®æ¨™ã€æµç¨‹èˆ‡æ™‚é–“å®‰æ’ï¼Œè®“å°çµ„æœ‰æ¸…æ¥šçš„æ–¹å‘ã€‚", role: "navigator" },
    { id: "q6",  text: "é¢å°è¤‡é›œä»»å‹™æ™‚ï¼Œæˆ‘èƒ½æŠŠæ­¥é©Ÿæ‹†è§£æˆå…·é«”åšæ³•ï¼Œæä¾›çµ¦å°çµ„åƒè€ƒã€‚", role: "navigator" },
    { id: "q7",  text: "ç•¶å¤§å®¶æ„è¦‹å¾ˆå¤šæ™‚ï¼Œæˆ‘èƒ½æ•´ç†æˆæœ‰æ¢ç†çš„æ¶æ§‹ï¼Œå¹«åŠ©æ±ºå®šæœ€åˆé©çš„æ–¹æ¡ˆã€‚", role: "navigator" },
    { id: "q8",  text: "åšå ±å‘Šæˆ–ä»»å‹™æ™‚ï¼Œæˆ‘å¤šåŠåªå®Œæˆè¢«äº¤ä»£çš„éƒ¨åˆ†ï¼Œå¾ˆå°‘å»æ€è€ƒæ•´é«”å®‰æ’æ˜¯å¦åˆç†ã€‚", role: "navigator", reverse: true },

    // èˆ¹é†«ï¼šé—œæ‡·ã€å”åŠ©ã€æ‡‰è®Šã€æ•‘æ´
    { id: "q9",  text: "åœ¨å°çµ„ä»»å‹™ä¸­ï¼Œæˆ‘æœƒæ³¨æ„å“ªäº›åŒå­¸æ¯”è¼ƒç·Šå¼µã€è½å¾Œæˆ–å¡é—œï¼Œä¸»å‹•é—œå¿ƒæˆ–å”åŠ©ã€‚", role: "medic" },
    { id: "q10", text: "ç•¶æœ‰äººå‡ºéŒ¯ã€æª”æ¡ˆéºå¤±æˆ–è‡¨æ™‚ç‹€æ³ç™¼ç”Ÿæ™‚ï¼Œæˆ‘æœƒé¡˜æ„å¹«å¿™è£œæ•‘ï¼Œè€Œä¸æ˜¯åªæ€ªå°æ–¹ã€‚", role: "medic" },
    { id: "q11", text: "å¦‚æœæˆ‘ç™¼ç¾æœ‰äººå£“åŠ›å¤ªå¤§æˆ–æƒ…ç·’ä½è½ï¼Œæˆ‘æœƒè©¦è‘—ç”¨è¡Œå‹•æˆ–è©±èªè®“ä»–æ¯”è¼ƒæ”¾é¬†ã€‚", role: "medic" },
    { id: "q12", text: "å…¶ä»–çµ„å“¡çš„ç‹€æ³èˆ‡æƒ…ç·’ï¼Œæˆ‘é€šå¸¸ä¸å¤ªæƒ³ç†æœƒï¼Œè¦ºå¾—å„åšå„çš„å°±å¥½ã€‚", role: "medic", reverse: true },

    // å‚³æ•™å£«ï¼šä¿¡å¿ƒã€å …å®šã€åŒ…å®¹ã€åŒç†ã€èªªæœ
    { id: "q13", text: "ç•¶å¤§å®¶æ‡·ç–‘èƒ½ä¸èƒ½å®Œæˆä»»å‹™æ™‚ï¼Œæˆ‘æœƒé¼“å‹µä»–å€‘ï¼Œç›¸ä¿¡å°çµ„æ˜¯åšå¾—åˆ°çš„ã€‚", role: "missionary" },
    { id: "q14", text: "é‡åˆ°ä¸åŒæ„è¦‹æ™‚ï¼Œæˆ‘æœƒå…ˆè©¦è‘—ç†è§£å°æ–¹çš„æƒ³æ³•ï¼Œå†è¡¨é”è‡ªå·±çš„ç«‹å ´ã€‚", role: "missionary" },
    { id: "q15", text: "ç•¶æˆ‘è¦ºå¾—æŸå€‹æ–¹å‘æ¯”è¼ƒå¥½æ™‚ï¼Œæˆ‘æœƒç”¨æœ‰ç¦®ã€å…·èªªæœåŠ›çš„æ–¹å¼ï¼Œå¼•å°å°çµ„æ¥å—é€™å€‹é¸æ“‡ã€‚", role: "missionary" },
    { id: "q16", text: "ç•¶äº‹æƒ…è®Šå¾—éº»ç…©æˆ–é€²åº¦è½å¾Œæ™‚ï¼Œæˆ‘å¸¸æœƒæƒ³ã€Œå·®ä¸å¤šå°±å¥½ã€ï¼Œä¸å¤ªæƒ³å†å¤šåŠªåŠ›æˆ–å¤šèªªæœå¤§å®¶ã€‚", role: "missionary", reverse: true },

    // æ°´æ‰‹ï¼šå …å®šã€æ¯…åŠ›ã€ç†Ÿç·´ã€åŸ·è¡Œ
    { id: "q17", text: "è¢«åˆ†é…åˆ°ä»»å‹™å¾Œï¼Œæˆ‘æœƒæŒ‰æ™‚å®Œæˆï¼Œä¸è®“çµ„å“¡æ“”å¿ƒæˆ–ä¸€å†æé†’ã€‚", role: "sailor" },
    { id: "q18", text: "å³ä½¿ä»»å‹™æ¯ç‡¥æˆ–æ™‚é–“ç·Šè¿«ï¼Œæˆ‘ä¹Ÿæœƒå’¬ç‰™æ’ä½ï¼ŒæŠŠä»½å…§çš„å·¥ä½œåšå®Œã€‚", role: "sailor" },
    { id: "q19", text: "éœ€è¦äººè™•ç†ç´°ç¯€ï¼ˆå¦‚æ’ç‰ˆã€æ•´ç†è³‡æ–™ã€æª¢æŸ¥éŒ¯å­—ï¼‰æ™‚ï¼Œæˆ‘é¡˜æ„è² è²¬åˆ°åº•ã€‚", role: "sailor" },
    { id: "q20", text: "å¦‚æœæ²’æœ‰ç‰¹åˆ¥é»åæˆ‘ï¼Œæˆ‘é€šå¸¸ä¸æœƒä¸»å‹•æ‰¿æ“”æˆ–æ¥ä¸‹å°çµ„ä»»å‹™ã€‚", role: "sailor", reverse: true }
  ];

  function shuffle(array) {
    const arr = array.slice();
    for (let i = arr.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [arr[i], arr[j]] = [arr[j], arr[i]];
    }
    return arr;
  }

  function renderQuestions() {
    const container = document.getElementById("questionsContainer");
    container.innerHTML = "";
    const shuffled = shuffle(QUESTIONS);

    shuffled.forEach((q, index) => {
      const block = document.createElement("div");
      block.className = "question-block";

      const num = index + 1;
      const qText = document.createElement("div");
      qText.className = "question-text";
      qText.textContent = `${num}. ${q.text}`;
      block.appendChild(qText);

      const scale = document.createElement("div");
      scale.className = "scale";

      for (let v = 1; v <= 5; v++) {
        const label = document.createElement("label");
        const input = document.createElement("input");
        input.type = "radio";
        input.name = q.id;
        input.value = v;
        const span = document.createElement("span");
        span.textContent = v;
        label.appendChild(input);
        label.appendChild(span);
        scale.appendChild(label);
      }

      block.appendChild(scale);
      container.appendChild(block);
    });
  }

  renderQuestions();

  function calculateScores() {
    const roleScores = {
      captain: [],
      navigator: [],
      medic: [],
      missionary: [],
      sailor: []
    };

    for (const q of QUESTIONS) {
      const selected = document.querySelector(`input[name="${q.id}"]:checked`);
      if (!selected) {
        alert("é‚„æœ‰é¡Œç›®æœªä½œç­”ï¼Œè«‹ç¢ºèªæ¯é¡Œéƒ½å·²é¸æ“‡ 1ï½5 åˆ†ã€‚");
        return null;
      }
      let score = Number(selected.value);
      if (q.reverse) {
        score = 6 - score; // åå‘é¡Œï¼š1â†”5, 2â†”4, 3ä¸è®Š
      }
      roleScores[q.role].push(score);
    }

    const avg = {};
    for (const role in roleScores) {
      const arr = roleScores[role];
      const total = arr.reduce((a, b) => a + b, 0);
      avg[role] = total / arr.length;
    }
    return avg;
  }

  function showResultPage(avg) {
    const labels = Object.keys(ROLE_CONFIG).map(k => ROLE_CONFIG[k].label);
    const data = Object.keys(ROLE_CONFIG).map(k => Number(avg[k].toFixed(2)));
    const entries = Object.entries(avg).sort((a, b) => b[1] - a[1]);

    const scoresHtml = entries.map(
      ([role, value]) =>
        `<div><strong>${ROLE_CONFIG[role].label}</strong>ï¼š${value.toFixed(2)} åˆ†</div>`
    ).join("");

    const labelsJson = JSON.stringify(labels);
    const dataJson = JSON.stringify(data);

    const newWin = window.open("", "_blank");
    if (!newWin) return;

    newWin.document.write(`<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<title>èˆªæµ·é›·é”åœ–èˆ‡åˆ†æ</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  body {
    font-family: "Noto Sans TC", -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
    margin: 0;
    padding: 24px 16px 32px;
    background: radial-gradient(circle at top, #020614, #0b152e);
    color: #f5f5f5;
    text-align: center;
  }
  h1 {
    margin: 0 0 16px;
    font-size: 26px;
    color: #ffdd66;
  }
  #radarChart {
    max-width: 520px;
    max-height: 520px;
    margin: 0 auto 20px;
  }
  .scores {
    font-size: 18px;
    line-height: 1.9;
    margin: 0 auto 14px;
    display: inline-block;
    text-align: left;
    color: #ffddaa;
  }
  .notes {
    font-size: 16px;
    line-height: 1.9;
    margin: 12px auto 0;
    display: inline-block;
    text-align: left;
    color: #ffddaa;
    border-top: 1px dashed rgba(255,255,255,0.3);
    padding-top: 10px;
  }
</style>
</head>
<body>
<h1>ğŸ§­ èˆªæµ·é›·é”åœ–èˆ‡åˆ†æ</h1>
<canvas id="radarChart"></canvas>
<div class="scores">
${scoresHtml}
</div>
<div class="notes">
  èˆ¹é•·ï¼ˆé ˜å°ã€åˆ†å·¥ã€æ±ºç­–ã€å‡èšï¼‰<br>
  èˆªæµ·å£«ï¼ˆåˆ†æã€æ–¹æ³•ã€å…§æ–‚ã€å»ºè­°ï¼‰<br>
  èˆ¹é†«ï¼ˆé—œæ‡·ã€å”åŠ©ã€æ‡‰è®Šã€æ•‘æ´ï¼‰<br>
  å‚³æ•™å£«ï¼ˆä¿¡å¿ƒã€å …å®šã€åŒ…å®¹ã€åŒç†ã€èªªæœï¼‰<br>
  æ°´æ‰‹ï¼ˆå …å®šã€æ¯…åŠ›ã€ç†Ÿç·´ã€åŸ·è¡Œï¼‰
</div>
<script>
  const ctx = document.getElementById("radarChart").getContext("2d");
  new Chart(ctx, {
    type: "radar",
    data: {
      labels: ${labelsJson},
      datasets: [{
        label: "æˆ‘çš„èˆªæµ·ç‰¹è³ªå¼·åº¦ï¼ˆ1ï½5åˆ†ï¼‰",
        data: ${dataJson},
        fill: true,
        backgroundColor: "rgba(255, 204, 102, 0.20)",
        borderColor: "rgba(255, 204, 102, 1)",
        pointBackgroundColor: "#ffcc66",
        pointRadius: 3,
        borderWidth: 2
      }]
    },
    options: {
      responsive: true,
      scales: {
        r: {
          suggestedMin: 1,
          suggestedMax: 5,
          ticks: {
            stepSize: 1,
            backdropColor: "transparent",
            color: "rgba(245,245,245,0.9)",
            font: { size: 10 }
          },
          grid: { color: "rgba(255,255,255,0.25)" },
          angleLines: { color: "rgba(255,255,255,0.25)" },
          pointLabels: {
            color: "#ffdd99",
            font: { size: 13 }
          }
        }
      },
      plugins: { legend: { display: false } }
    }
  });
</script>
</body>
</html>`);
    newWin.document.close();
  }

  document.getElementById("generateBtn").addEventListener("click", () => {
    const avg = calculateScores();
    if (!avg) return;
    showResultPage(avg);
  });

  document.getElementById("resetBtn").addEventListener("click", () => {
    renderQuestions();
    window.scrollTo({ top: 0, behavior: "smooth" });
  });
</script>

</body>
</html>

