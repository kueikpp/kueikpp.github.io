<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¸¬é©—ä½ çš„èˆªæµ·å®¶ç‰¹è³ª</title>
    <!-- è¼‰å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- è¼‰å…¥ Chart.js (ç”¨æ–¼é›·é”åœ–) -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        /* è¨­å®šå­—é«”ç‚º Interï¼Œä¸¦ç‚ºä¸­æ–‡å­—é«”æ·»åŠ  fallback */
        :root {
            font-family: 'Inter', 'Noto Sans TC', sans-serif;
        }

        /* è‡ªå®šç¾©æ˜Ÿç©ºèƒŒæ™¯ */
        body {
            background-color: #0d1117; /* æ·±è—è‰²/å¤ªç©ºè‰² */
            background-image:
                radial-gradient(ellipse at bottom, #1B2735 0%, #090A0F 100%);
            height: 100vh;
            overflow-y: auto;
            color: #E2E8F0; /* æ·ºç°è‰²å­—é«” */
        }

        /* å®šç¾©æ˜Ÿæ˜Ÿæ•ˆæœ (å¯é¸) */
        .stars-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.8;
        }
        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: white;
            border-radius: 50%;
            opacity: 0.8;
            animation: twinkle 10s infinite ease-in-out;
        }

        /* éš¨æ©Ÿç”Ÿæˆæ˜Ÿæ˜Ÿä½ç½®å’Œå»¶é² */
        /* (ç‚ºä¿æŒå–®ä¸€æ–‡ä»¶ç°¡æ½”ï¼Œé€™è£¡åªæ”¾ä¸€å€‹ç°¡å–®çš„twinkleå‹•ç•«ï¼Œä¸¦ä¾è³´ Tailwind é¡ä¾†ä½ˆå±€) */
        @keyframes twinkle {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 0.2; }
        }

        /* ç¢ºä¿é¡Œç›®é¸é …è¶³å¤ å¤§ï¼Œé©åˆæ‰‹æ©Ÿé»æ“Š */
        input[type="radio"] + label {
            display: inline-flex;
            justify-content: center;
            align-items: center;
            width: 48px; /* å¢å¤§é»æ“Šå€åŸŸ */
            height: 48px;
            border-radius: 9999px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 1rem;
            border: 2px solid #475569;
            background-color: #0f172a;
        }

        input[type="radio"]:checked + label {
            background-color: #3b82f6; /* äº®è—è‰² */
            border-color: #3b82f6;
            color: white;
            box-shadow: 0 0 10px rgba(59, 130, 246, 0.5);
        }

        input[type="radio"]:focus + label {
            outline: none;
            box-shadow: 0 0 0 3px rgba(96, 165, 250, 0.4);
        }

        /* éš±è—åŸç”Ÿ radio æŒ‰éˆ• */
        input[type="radio"] {
            position: absolute;
            opacity: 0;
            width: 0;
            height: 0;
        }
    </style>
</head>
<body>

    <!-- æ˜Ÿæ˜Ÿæ•ˆæœå®¹å™¨ -->
    <div class="stars-container">
        <!-- æ”¾ç½®ä¸€äº›éš¨æ©Ÿæ˜Ÿæ˜Ÿ -->
        <div class="star top-10 left-5"></div>
        <div class="star top-1/4 right-1/4 animate-[twinkle_8s_infinite] opacity-50"></div>
        <div class="star bottom-20 left-1/2 animate-[twinkle_12s_infinite] opacity-70"></div>
        <div class="star top-1/2 left-3/4 animate-[twinkle_6s_infinite] opacity-60"></div>
        <div class="star bottom-5 right-5"></div>
        <div class="star top-5 right-20 animate-[twinkle_9s_infinite] opacity-40"></div>
        <div class="star bottom-1/3 left-1/4 animate-[twinkle_7s_infinite] opacity-90"></div>
    </div>


    <!-- æ¸¬é©—é é¢å®¹å™¨ -->
    <div id="quiz-page" class="max-w-4xl mx-auto p-6 lg:p-10 relative">
        <header class="text-center mb-10">
            <!-- ä¸»æ¨™é¡Œæ”¹ç‚ºäº®é»ƒè‰² (text-yellow-300) -->
            <h1 class="text-3xl sm:text-4xl lg:text-5xl font-extrabold mb-4 text-yellow-300 tracking-wider" style="font-size: 32px;">æ¸¬é©—ä½ çš„èˆªæµ·å®¶ç‰¹è³ª</h1>
            <!-- å•å·èªªæ˜æ”¹ç‚ºäº®æ©™è‰² (text-orange-300) -->
            <p class="text-lg text-orange-300">ä¾ç…§å‰›å‰›è‡ªå·±åœ¨å°çµ„ä»»å‹™ä¸­çš„è¡¨ç¾ï¼Œæˆ–å¹³æ™‚çš„ç¿’æ…£ä¾†ä½œç­”ï¼Œè¦ºå¯Ÿä½ çš„èˆªæµ·å®¶ç‰¹è³ªï¼</p>
            <!-- ç¬¬äºŒè¡Œèªªæ˜æ”¹ç‚ºäº®æ©™è‰² (text-orange-400) -->
            <p class="text-md text-orange-400 mt-2">æ¯é¡Œè«‹å‹¾é¸ä¸€å€‹æ•¸å­— (1ï¼éå¸¸ä¸åŒæ„ï¼Œ5ï¼éå¸¸åŒæ„)ï¼Œå®Œæˆå¾ŒæŒ‰ä¸‹ã€Œæäº¤ã€æŸ¥çœ‹çµæœã€‚</p>
        </header>

        <form id="quiz-form" class="space-y-8 pb-20">
            <!-- å•å·é¡Œç›®å°‡ç”± JS å‹•æ…‹ç”Ÿæˆ -->
            <div id="questions-container">
                <!-- é¡Œç›®æ¸…å–® -->
            </div>

            <div class="flex justify-center mt-12">
                <button type="submit" id="submit-btn" class="px-8 py-4 bg-blue-600 hover:bg-blue-700 text-white font-bold text-xl rounded-xl shadow-lg transition duration-300 transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-blue-500 focus:ring-opacity-50">
                    æäº¤å•å·ï¼ŒæŸ¥çœ‹çµæœ
                </button>
            </div>
            
            <div id="error-message" class="text-red-400 text-center font-bold mt-4 hidden p-3 rounded-lg bg-red-900 bg-opacity-30">
                è«‹å®Œæˆæ‰€æœ‰ 20 é¡Œçš„ä½œç­”ï¼Œæ‰èƒ½æäº¤å–”ï¼
            </div>
        </form>
    </div>

    <!-- çµæœé é¢å®¹å™¨ (é è¨­éš±è—) -->
    <div id="results-page" class="hidden max-w-4xl mx-auto p-6 lg:p-10 text-center relative">
        <h1 class="text-3xl sm:text-4xl lg:text-5xl font-extrabold mb-6 text-green-300 tracking-wider">ä½ çš„èˆªæµ·å®¶ç‰¹è³ªåˆ†æå ±å‘Š</h1>
        
        <!-- é›·é”åœ–å€å¡Š -->
        <div class="mb-10 p-6 bg-gray-800 bg-opacity-70 rounded-2xl shadow-2xl">
            <h2 class="text-2xl font-semibold mb-4 text-blue-400">ç‰¹è³ªé›·é”åœ–</h2>
            <div class="w-full max-w-xl mx-auto">
                <canvas id="radar-chart"></canvas>
            </div>
        </div>

        <!-- æ¨è–¦è§’è‰²å€å¡Š -->
        <div id="recommendation-output" class="mb-10 p-6 bg-gray-800 bg-opacity-70 rounded-2xl shadow-2xl text-left">
            <h2 class="text-3xl font-bold mb-4 text-yellow-300 text-center">ğŸ† æœ€ä½³ç‰¹è³ªæ¨è–¦ ğŸ†</h2>
            <!-- æ¨è–¦è§’è‰²æ–‡å­—å°‡ç”± JS å¡«å…… -->
        </div>

        <!-- è§’è‰²ç‰¹è³ªèªªæ˜å€å¡Š -->
        <div class="p-6 bg-gray-800 bg-opacity-70 rounded-2xl shadow-2xl text-left">
            <h2 class="text-2xl font-semibold mb-4 text-blue-400 text-center">äº”å¤§è§’è‰²ç‰¹è³ªç¸½è¦½</h2>
            <ul id="all-roles-traits" class="grid grid-cols-1 md:grid-cols-2 gap-4 text-lg">
                <!-- ç‰¹è³ªæ¸…å–®å°‡ç”± JS å¡«å…… -->
            </ul>
        </div>

        <button onclick="window.location.reload()" class="mt-10 px-8 py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold text-lg rounded-xl shadow-lg transition duration-300 transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-blue-500 focus:ring-opacity-50">
            é‡æ–°ä½œç­”
        </button>
    </div>


    <script>
        // è¨­å®šæ‡‰ç”¨ç¨‹å¼çš„é è¨­å­—é«”
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'Noto Sans TC', 'sans-serif'],
                    },
                }
            }
        };

        const questionsData = [
            // èˆ¹é•· (Captain) - é ˜å°ã€åˆ†å·¥ã€æ±ºç­–ã€å‡èš (Q1-4)
            { id: 1, role: 'èˆ¹é•·', text: 'åœ¨å°çµ„è¨è«–æ™‚ï¼Œæˆ‘æœƒä¸»å‹•é–‹é ­æˆ–æ”¶æ–‚é‡é»ï¼Œå¹«å¤§å®¶èšç„¦åœ¨å…±åŒç›®æ¨™ä¸Šã€‚', reverse: false },
            { id: 2, role: 'èˆ¹é•·', text: 'åˆ†é…å·¥ä½œæ™‚ï¼Œæˆ‘æœƒå”èª¿èª°é©åˆåšä»€éº¼ï¼Œç›¡é‡è®“ä»»å‹™åˆ†é…æ¸…æ¥šåˆå…¬å¹³ã€‚', reverse: false },
            { id: 3, role: 'èˆ¹é•·', text: 'ç•¶çµ„å…§å‡ºç¾çŒ¶è±«æˆ–å¡ä½æ™‚ï¼Œæˆ‘é¡˜æ„åšå‡ºæ±ºå®šï¼Œå¸¶è‘—å¤§å®¶å¾€ä¸‹ä¸€æ­¥å‰é€²ã€‚', reverse: false },
            { id: 4, role: 'èˆ¹é•·', text: 'åœ¨å°çµ„ä»»å‹™ä¸­ï¼Œæˆ‘é€šå¸¸ä¸å¤ªç™¼è¡¨æ„è¦‹ï¼Œä¹Ÿä¸å¤ªåƒèˆ‡åˆ†å·¥æˆ–æ±ºç­–ï¼Œåªè·Ÿè‘—åšå°±å¥½ã€‚', reverse: true }, // åå‘é¡Œ

            // èˆªæµ·å£« (Navigator) - åˆ†æã€æ–¹æ³•ã€å…§æ–‚ã€å»ºè­° (Q5-8)
            { id: 5, role: 'èˆªæµ·å£«', text: 'é–‹å§‹ä»»å‹™å‰ï¼Œæˆ‘æœƒå…ˆç¢ºèªç›®æ¨™ã€æµç¨‹èˆ‡æ™‚é–“å®‰æ’ï¼Œè®“å°çµ„æœ‰æ¸…æ¥šçš„æ–¹å‘ã€‚', reverse: false },
            { id: 6, role: 'èˆªæµ·å£«', text: 'é¢å°è¤‡é›œä»»å‹™æ™‚ï¼Œæˆ‘èƒ½æŠŠæ­¥é©Ÿæ‹†è§£æˆå…·é«”åšæ³•ï¼Œæä¾›çµ¦å°çµ„åƒè€ƒã€‚', reverse: false },
            { id: 7, role: 'èˆªæµ·å£«', text: 'ç•¶å¤§å®¶æ„è¦‹å¾ˆå¤šæ™‚ï¼Œæˆ‘èƒ½æ•´ç†æˆæœ‰æ¢ç†çš„æ¶æ§‹ï¼Œå¹«åŠ©æ±ºå®šæœ€åˆé©çš„æ–¹æ¡ˆã€‚', reverse: false },
            { id: 8, role: 'èˆªæµ·å£«', text: 'åšå ±å‘Šæˆ–ä»»å‹™æ™‚ï¼Œæˆ‘å¤šåŠåªå®Œæˆè¢«äº¤ä»£çš„éƒ¨åˆ†ï¼Œå¾ˆå°‘å»æ€è€ƒæ•´é«”å®‰æ’æ˜¯å¦åˆç†ã€‚', reverse: true }, // åå‘é¡Œ

            // èˆ¹é†« (Ship Doctor) - é—œæ‡·ã€å”åŠ©ã€æ‡‰è®Šã€æ•‘æ´ (Q9-12)
            { id: 9, role: 'èˆ¹é†«', text: 'åœ¨å°çµ„ä»»å‹™ä¸­ï¼Œæˆ‘æœƒæ³¨æ„å“ªäº›åŒå­¸æ¯”è¼ƒç·Šå¼µã€è½å¾Œæˆ–å¡é—œï¼Œä¸»å‹•é—œå¿ƒæˆ–å”åŠ©ã€‚', reverse: false },
            { id: 10, role: 'èˆ¹é†«', text: 'ç•¶æœ‰äººå‡ºéŒ¯ã€æª”æ¡ˆéºå¤±æˆ–è‡¨æ™‚ç‹€æ³ç™¼ç”Ÿæ™‚ï¼Œæˆ‘æœƒé¡˜æ„å¹«å¿™è£œæ•‘ï¼Œè€Œä¸æ˜¯åªæ€ªå°æ–¹ã€‚', reverse: false },
            { id: 11, role: 'èˆ¹é†«', text: 'å¦‚æœæˆ‘ç™¼ç¾æœ‰äººå£“åŠ›å¤ªå¤§æˆ–æƒ…ç·’ä½è½ï¼Œæˆ‘æœƒè©¦è‘—ç”¨è¡Œå‹•æˆ–è©±èªè®“ä»–æ¯”è¼ƒæ”¾é¬†ã€‚', reverse: false },
            { id: 12, role: 'èˆ¹é†«', text: 'å…¶ä»–çµ„å“¡çš„ç‹€æ³èˆ‡æƒ…ç·’ï¼Œæˆ‘é€šå¸¸ä¸å¤ªæƒ³ç†æœƒï¼Œè¦ºå¾—å„åšå„çš„å°±å¥½ã€‚', reverse: true }, // åå‘é¡Œ

            // å‚³æ•™å£« (Missionary) - ä¿¡å¿ƒã€å …å®šã€åŒ…å®¹ã€åŒç†ã€èªªæœ (Q13-16)
            { id: 13, role: 'å‚³æ•™å£«', text: 'ç•¶å¤§å®¶æ‡·ç–‘èƒ½ä¸èƒ½å®Œæˆä»»å‹™æ™‚ï¼Œæˆ‘æœƒé¼“å‹µä»–å€‘ï¼Œç›¸ä¿¡å°çµ„æ˜¯åšå¾—åˆ°çš„ã€‚', reverse: false },
            { id: 14, role: 'å‚³æ•™å£«', text: 'é‡åˆ°ä¸åŒæ„è¦‹æ™‚ï¼Œæˆ‘æœƒå…ˆè©¦è‘—ç†è§£å°æ–¹çš„æƒ³æ³•ï¼Œå†è¡¨é”è‡ªå·±çš„ç«‹å ´ã€‚', reverse: false },
            { id: 15, role: 'å‚³æ•™å£«', text: 'ç•¶æˆ‘è¦ºå¾—æŸå€‹æ–¹å‘æ¯”è¼ƒå¥½æ™‚ï¼Œæˆ‘æœƒç”¨æœ‰ç¦®ã€å…·èªªæœåŠ›çš„æ–¹å¼ï¼Œå¼•å°å°çµ„æ¥å—é€™å€‹é¸æ“‡ã€‚', reverse: false },
            { id: 16, role: 'å‚³æ•™å£«', text: 'ç•¶äº‹æƒ…è®Šå¾—éº»ç…©æˆ–é€²åº¦è½å¾Œæ™‚ï¼Œæˆ‘å¸¸æœƒæƒ³ã€Œå·®ä¸å¤šå°±å¥½ã€ï¼Œä¸å¤ªæƒ³å†å¤šåŠªåŠ›æˆ–å¤šèªªæœå¤§å®¶ã€‚', reverse: true }, // åå‘é¡Œ

            // æ°´æ‰‹ (Sailor) - å …å®šã€æ¯…åŠ›ã€ç†Ÿç·´ã€åŸ·è¡Œ (Q17-20)
            { id: 17, role: 'æ°´æ‰‹', text: 'è¢«åˆ†é…åˆ°ä»»å‹™å¾Œï¼Œæˆ‘æœƒæŒ‰æ™‚å®Œæˆï¼Œä¸è®“çµ„å“¡æ“”å¿ƒæˆ–ä¸€å†æé†’ã€‚', reverse: false },
            { id: 18, role: 'æ°´æ‰‹', text: 'å³ä½¿ä»»å‹™æ¯ç‡¥æˆ–æ™‚é–“ç·Šè¿«ï¼Œæˆ‘ä¹Ÿæœƒå’¬ç‰™æ’ä½ï¼ŒæŠŠä»½å…§çš„å·¥ä½œåšå®Œã€‚', reverse: false },
            { id: 19, role: 'æ°´æ‰‹', text: 'éœ€è¦äººè™•ç†ç´°ç¯€ï¼ˆå¦‚æ’ç‰ˆã€æ•´ç†è³‡æ–™ã€æª¢æŸ¥éŒ¯å­—ï¼‰æ™‚ï¼Œæˆ‘é¡˜æ„è² è²¬åˆ°åº•ã€‚', reverse: false },
            { id: 20, role: 'æ°´æ‰‹', text: 'å¦‚æœæ²’æœ‰ç‰¹åˆ¥é»åæˆ‘ï¼Œæˆ‘é€šå¸¸ä¸æœƒä¸»å‹•æ‰¿æ“”æˆ–æ¥ä¸‹å°çµ„ä»»å‹™ã€‚', reverse: true } // åå‘é¡Œ
        ];

        const roleDescriptions = {
            'èˆ¹é•·': {
                traits: 'é ˜å°ã€åˆ†å·¥ã€æ±ºç­–ã€å‡èš',
                importance: 'èˆ¹é•·æ˜¯èˆ¹éšŠçš„èˆµæ‰‹ï¼Œè² è²¬æŒ‡å¼•æ–¹å‘ã€åšå‡ºé—œéµæ±ºç­–ï¼Œä¸¦æ¿€å‹µæ•´å€‹åœ˜éšŠï¼Œè®“å¤§å®¶ç›®æ¨™ä¸€è‡´ï¼Œä¹˜é¢¨ç ´æµªå‰è¡Œã€‚ä½ çš„é ˜å°å…‰èŠ’ï¼Œè®“èˆ¹éšŠç„¡æ‰€ç•æ‡¼ï¼',
            },
            'èˆªæµ·å£«': {
                traits: 'åˆ†æã€æ–¹æ³•ã€å…§æ–‚ã€å»ºè­°',
                importance: 'èˆªæµ·å£«æ˜¯èˆ¹éšŠçš„å¤§è…¦ï¼Œèƒ½å¤ é æ¸¬é¢¨å‘ã€è¦åŠƒèˆªç·šã€åˆ†ææ•¸æ“šã€‚æœ‰äº†ä½ ç²¾æº–çš„ç­–ç•¥å’Œå‘¨å¯†çš„è¨ˆç•«ï¼Œèˆ¹éšŠæ‰èƒ½é¿é–‹æš—ç¤ï¼Œç©©å¥å‰è¡Œï¼Œä½ çš„ç¿æ™ºæ˜¯ç„¡åƒ¹ä¹‹å¯¶ï¼',
            },
            'èˆ¹é†«': {
                traits: 'é—œæ‡·ã€å”åŠ©ã€æ‡‰è®Šã€æ•‘æ´',
                importance: 'èˆ¹é†«æ˜¯èˆ¹éšŠçš„å®šå¿ƒä¸¸ï¼Œä¸åƒ…ç…§é¡§åœ˜éšŠçš„å¥åº·ï¼Œæ›´æ“…é•·è™•ç†çªç™¼ç‹€æ³å’Œæƒ…ç·’ä½è½ã€‚ä½ æ˜¯èˆ¹éšŠä¸­æœ€æº«æš–çš„å­˜åœ¨ï¼Œè®“æ¯å€‹çµ„å“¡éƒ½èƒ½å®‰å¿ƒæˆ°é¬¥ï¼Œä½ çš„ç´°å¿ƒæ˜¯æœ€å¤§çš„åŠ›é‡ï¼',
            },
            'å‚³æ•™å£«': {
                traits: 'ä¿¡å¿ƒã€å …å®šã€åŒ…å®¹ã€åŒç†ã€èªªæœ',
                importance: 'å‚³æ•™å£«æ˜¯èˆ¹éšŠçš„ç™¼é›»æ©Ÿï¼Œå¸¶ä¾†ç„¡çª®çš„ä¿¡å¿ƒå’Œæ­£å‘èƒ½é‡ã€‚ä½ èƒ½å¤ åŒ–è§£åˆ†æ­§ã€ä¿ƒé€²ç†è§£ï¼Œç”¨çœŸèª çš„èªªæœåŠ›ï¼Œå°‡å¤§å®¶åœ˜çµåœ¨ä¸€èµ·ï¼Œå…‹æœæŒ‘æˆ°ï¼Œä½ æ˜¯åœ˜éšŠçš„é»åˆåŠ‘ï¼',
            },
            'æ°´æ‰‹': {
                traits: 'å …å®šã€æ¯…åŠ›ã€ç†Ÿç·´ã€åŸ·è¡Œ',
                importance: 'æ°´æ‰‹æ˜¯èˆ¹éšŠçš„åŸºçŸ³ï¼Œè² è²¬ç¢ºä¿æ¯ä¸€é …ä»»å‹™éƒ½èƒ½ç´®å¯¦å®Œæˆã€‚ä½ çš„å°ˆæ³¨å’Œæ¯…åŠ›ï¼Œæ˜¯èˆ¹éšŠèƒ½å¤ é †åˆ©èˆªè¡Œã€é”æˆç›®æ¨™çš„å¼·å¤§å¾Œç›¾ï¼Œä½ çš„ä»˜å‡ºè®“ç›®æ¨™å¾—ä»¥å¯¦ç¾ï¼',
            },
        };

        const roles = Object.keys(roleDescriptions);

        /**
         * Fisher-Yates Shuffle éš¨æ©Ÿæ‰“äº‚é™£åˆ—é †åº
         * @param {Array} array 
         */
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        /**
         * å‹•æ…‹ç”Ÿæˆå•å·é¡Œç›® HTML
         */
        function renderQuiz() {
            shuffleArray(questionsData); // éš¨æ©Ÿæ‰“äº‚é¡Œç›®é †åº
            const container = document.getElementById('questions-container');
            container.innerHTML = questionsData.map((q, index) => {
                // **å·²ç§»é™¤åå‘è¨ˆåˆ†æç¤º (const reverseTag å’Œå…¶æ’å…¥)**
                
                // é¡Œç›®å€å¡Š
                let questionHtml = `
                    <div class="p-5 sm:p-6 bg-gray-900 bg-opacity-70 rounded-xl shadow-xl transition duration-300 hover:shadow-blue-500/50">
                        <p class="text-lg sm:text-xl font-semibold mb-4 text-blue-200">
                            ${index + 1}. ${q.text} 
                        </p>
                        <div class="flex justify-between items-center space-x-2 sm:space-x-4 mt-2">
                            <span class="text-sm text-gray-400">1 (éå¸¸ä¸åŒæ„)</span>
                            <div class="flex space-x-2 sm:space-x-4">
                `;

                // 1-5 åˆ†é¸é …
                for (let i = 1; i <= 5; i++) {
                    questionHtml += `
                        <div>
                            <input type="radio" id="q${q.id}-${i}" name="q${q.id}" value="${i}" required data-role="${q.role}" data-reverse="${q.reverse}">
                            <label for="q${q.id}-${i}" class="text-white">${i}</label>
                        </div>
                    `;
                }

                questionHtml += `
                            </div>
                            <span class="text-sm text-gray-400">5 (éå¸¸åŒæ„)</span>
                        </div>
                    </div>
                `;
                return questionHtml;
            }).join('');

            // åŒæ­¥é¡¯ç¤ºæ‰€æœ‰ç‰¹è³ªèªªæ˜ (ä½œç‚ºåƒè€ƒ)
            const allTraitsContainer = document.getElementById('all-roles-traits');
            allTraitsContainer.innerHTML = roles.map(role => `
                <li class="p-3 bg-gray-700 rounded-lg shadow-inner">
                    <strong class="text-yellow-400">${role}ï¼š</strong>
                    <span class="text-gray-200">${roleDescriptions[role].traits}</span>
                </li>
            `).join('');
        }

        /**
         * è™•ç†è¡¨å–®æäº¤ä¸¦è¨ˆç®—çµæœ
         * @param {Event} e 
         */
        function handleSubmit(e) {
            e.preventDefault();
            
            const form = e.target;
            const formData = new FormData(form);
            const scores = {};
            
            roles.forEach(role => scores[role] = 0);

            let answeredCount = 0;

            // éæ­·æ‰€æœ‰é¡Œç›®
            questionsData.forEach(q => {
                const value = formData.get(`q${q.id}`);
                
                if (value) {
                    answeredCount++;
                    let score = parseInt(value, 10);

                    // è™•ç†åå‘è¨ˆåˆ†
                    if (q.reverse) {
                        score = 6 - score; // 1->5, 2->4, 3->3, 4->2, 5->1
                    }
                    
                    // ç´¯è¨ˆåˆ†æ•¸
                    scores[q.role] += score;
                }
            });

            const errorElement = document.getElementById('error-message');
            if (answeredCount !== questionsData.length) {
                errorElement.classList.remove('hidden');
                // æ‰¾åˆ°æœªä½œç­”çš„ç¬¬ä¸€é¡Œä¸¦æ²å‹•éå»
                const firstUnanswered = questionsData.find(q => !formData.get(`q${q.id}`));
                if (firstUnanswered) {
                    document.getElementsByName(`q${firstUnanswered.id}`)[0].closest('.p-5').scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
                return;
            }
            errorElement.classList.add('hidden');

            // é¡¯ç¤ºçµæœé é¢
            showResults(scores);
        }

        /**
         * é¡¯ç¤ºçµæœé é¢
         * @param {Object} scores 
         */
        function showResults(scores) {
            document.getElementById('quiz-page').classList.add('hidden');
            document.getElementById('results-page').classList.remove('hidden');

            // 1. ç¹ªè£½é›·é”åœ–
            drawRadarChart(scores);

            // 2. è§’è‰²æ¨è–¦
            recommendRoles(scores);
        }

        /**
         * ç¹ªè£½äº”è§’é›·é”åœ–
         * @param {Object} scores 
         */
        function drawRadarChart(scores) {
            const ctx = document.getElementById('radar-chart').getContext('2d');
            
            // å°‡åˆ†æ•¸å¾ç‰©ä»¶è½‰æ›ç‚ºé™£åˆ—ï¼Œä¸¦ç¢ºä¿é †åºèˆ‡ roles é™£åˆ—ä¸€è‡´
            const dataValues = roles.map(role => scores[role]); 

            new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: roles, // èˆ¹é•·, èˆªæµ·å£«, èˆ¹é†«, å‚³æ•™å£«, æ°´æ‰‹
                    datasets: [{
                        label: 'ä½ çš„èˆªæµ·å®¶ç‰¹è³ªå¾—åˆ† (æœ€é«˜20åˆ†)',
                        data: dataValues,
                        backgroundColor: 'rgba(59, 130, 246, 0.4)', // è—è‰²èƒŒæ™¯
                        borderColor: 'rgba(59, 130, 246, 1)', // è—è‰²é‚Šæ¡†
                        pointBackgroundColor: 'rgba(251, 191, 36, 1)', // é»ƒè‰²é»
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgba(251, 191, 36, 1)',
                        borderWidth: 2,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    scales: {
                        r: {
                            angleLines: { color: 'rgba(255, 255, 255, 0.3)' },
                            grid: { color: 'rgba(255, 255, 255, 0.3)' },
                            pointLabels: { 
                                font: { size: 14, family: 'Noto Sans TC, sans-serif', weight: 'bold' },
                                color: '#E2E8F0' // æ¨™ç±¤é¡è‰²
                            },
                            suggestedMin: 0,
                            suggestedMax: 20, // æ»¿åˆ† 4 é¡Œ * 5 åˆ† = 20 åˆ†
                            ticks: {
                                stepSize: 5,
                                backdropColor: 'rgba(13, 17, 23, 0.8)', // åˆ»åº¦èƒŒæ™¯è‰²
                                color: '#E2E8F0',
                                font: { family: 'Noto Sans TC, sans-serif' }
                            },
                        }
                    },
                    plugins: {
                        legend: {
                            labels: {
                                color: '#E2E8F0',
                                font: { size: 16, family: 'Noto Sans TC, sans-serif' }
                            }
                        },
                        tooltip: {
                            titleFont: { family: 'Noto Sans TC, sans-serif' },
                            bodyFont: { family: 'Noto Sans TC, sans-serif' }
                        }
                    }
                }
            });
        }

        /**
         * æ¨è–¦è§’è‰²ä¸¦ç”¢ç”Ÿæƒ…ç·’åƒ¹å€¼æ–‡å­—
         * @param {Object} scores 
         */
        function recommendRoles(scores) {
            const recommendationOutput = document.getElementById('recommendation-output');
            
            // 1. å°‡åˆ†æ•¸è½‰ç‚ºé™£åˆ—ä¸¦æ’åº
            const sortedRoles = Object.entries(scores)
                .map(([role, score]) => ({ role, score }))
                .sort((a, b) => b.score - a.score);

            const top3 = sortedRoles.slice(0, 3);

            let html = '<ul class="space-y-4">';

            // 2. é¡¯ç¤ºæ¨è–¦æ–‡å­—
            top3.forEach((item, index) => {
                const rank = index + 1;
                const role = item.role;
                const score = item.score;
                const importance = roleDescriptions[role].importance;
                let rankStyle = '';
                
                if (rank === 1) {
                    rankStyle = 'text-3xl text-yellow-300 font-extrabold border-b-2 border-yellow-300 pb-2';
                } else if (rank === 2) {
                    rankStyle = 'text-2xl text-gray-300 font-bold';
                } else if (rank === 3) {
                    rankStyle = 'text-xl text-gray-400 font-semibold';
                }

                html += `
                    <li class="p-4 rounded-lg bg-gray-700 shadow-xl">
                        <p class="${rankStyle} mb-2 flex items-center">
                            ${rank === 1 ? 'ğŸŒŸ ' : rank === 2 ? 'ğŸ¥ˆ ' : 'ğŸ¥‰ '}
                            <span class="ml-2">${role}</span>
                            <span class="text-sm ml-auto text-yellow-500">å¾—åˆ†: ${score} / 20</span>
                        </p>
                        <p class="text-gray-200 mt-1 pl-1">
                            ${importance}
                        </p>
                    </li>
                `;
            });

            html += '</ul>';
            
            recommendationOutput.innerHTML = html;
        }

        // ç›£è½è¡¨å–®æäº¤äº‹ä»¶
        document.getElementById('quiz-form').addEventListener('submit', handleSubmit);

        // é é¢è¼‰å…¥å®Œæˆå¾Œæ¸²æŸ“å•å·
        window.onload = renderQuiz;
    </script>

</body>
</html>
